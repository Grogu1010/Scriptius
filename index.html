<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Scriptius &mdash; Screenwriting Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Mono:wght@400;700&family=Courier+Prime:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="background-canvas" aria-hidden="true">
      <div class="background-orb orb-one"></div>
      <div class="background-orb orb-two"></div>
      <div class="background-grid"></div>
    </div>

    <div class="app-shell">
      <header class="app-header glass-panel">
        <div class="header-primary">
          <div class="brand">
            <div class="logo" aria-hidden="true">âœ¶</div>
            <div class="title-group">
              <span class="brand-title">Scriptius</span>
              <span class="brand-tagline">Focused screenwriting workspace</span>
            </div>
          </div>
          <div class="header-actions">
            <button type="button" class="ghost pill" id="libraryBtn" title="View your saved scripts">
              <span class="btn-icon" aria-hidden="true">â˜°</span>
              <span>Library</span>
            </button>
            <button
              type="button"
              class="ghost icon"
              id="themeToggle"
              title="Toggle theme"
              aria-label="Toggle theme"
            >
              ðŸŒ—
            </button>
          </div>
        </div>

        <div class="document-meta">
          <div class="title-area">
            <label for="scriptTitle" class="sr-only">Script title</label>
            <input
              id="scriptTitle"
              class="title-input"
              type="text"
              placeholder="Untitled Script"
              autocomplete="off"
              spellcheck="false"
            />
          </div>
          <div class="meta-actions">
            <div class="menu-group">
              <button type="button" class="ghost" id="viewMenuBtn" aria-haspopup="true" aria-expanded="false">
                View â–¾
              </button>
              <ul class="menu view-menu" id="viewMenu" role="menu">
                <li role="menuitem">
                  <button type="button" id="toggleOutlineBtn" data-view-target="outline">Hide outline</button>
                </li>
                <li role="menuitem">
                  <button type="button" id="togglePreviewBtn" data-view-target="preview">Hide preview</button>
                </li>
              </ul>
            </div>
            <button type="button" class="ghost" id="newDocumentBtn" title="Start a fresh document">
              New
            </button>
            <button type="button" class="ghost" id="importDocumentBtn" title="Import Fountain or text">
              Import
            </button>
            <input type="file" id="filePicker" accept=".fountain,.txt,.md,.fdx" hidden />
            <div class="menu-group">
              <button type="button" class="ghost" id="exportMenuBtn" aria-haspopup="true" aria-expanded="false">
                Export â–¾
              </button>
              <ul class="menu" id="exportMenu" role="menu">
                <li role="menuitem">
                  <button type="button" id="downloadFountainBtn">Download Fountain</button>
                </li>
                <li role="menuitem">
                  <button type="button" id="downloadTxtBtn">Download Text</button>
                </li>
                <li role="menuitem">
                  <button type="button" id="printBtn">Print / PDF</button>
                </li>
              </ul>
            </div>
            <button type="button" class="primary" id="shareBtn" title="Create a shareable link">
              Share
            </button>
          </div>
        </div>

        <div class="header-secondary">
          <div class="hero-copy">
            <h1>Design your next script beat by beat</h1>
            <p>
              Snap between outline, formatted pages and insights while autosave keeps every draft safe on this device.
            </p>
            <ul class="hero-list">
              <li>Break scenes into beats straight from the outline panel.</li>
              <li>Preview formatted pages instantly as you type.</li>
              <li>Share secure, local links whenever you need feedback.</li>
            </ul>
          </div>
          <div class="header-metrics">
            <article class="status-card glass-panel">
              <h2 class="status-label">Autosave</h2>
              <div class="status-indicator" data-autosave-indicator data-state="idle">
                <span class="status-dot" aria-hidden="true"></span>
                <span id="autosaveStatus">Draft not saved</span>
              </div>
              <p class="status-subtext">Changes stay on this device until you export or share.</p>
            </article>
            <article class="progress-card glass-panel">
              <div class="progress-top">
                <span class="progress-title">Story pace</span>
                <span class="progress-runtime" id="runtimeStat">Runtime: 0 min</span>
              </div>
              <div
                class="progress-track"
                id="scriptProgressTrack"
                role="progressbar"
                aria-valuemin="0"
                aria-valuemax="110"
                aria-valuenow="0"
                aria-label="Estimated screenplay pages completed"
              >
                <div class="progress-value" id="scriptProgressValue"></div>
              </div>
              <p class="progress-caption" id="progressLabel">Start charting your opening act.</p>
              <div class="metric-grid" id="statusMetrics">
                <div class="metric-pill">
                  <span class="metric-label">Words</span>
                  <span class="metric-value" id="wordStat">0 words</span>
                </div>
                <div class="metric-pill">
                  <span class="metric-label">Scenes</span>
                  <span class="metric-value" id="sceneStat">0 scenes</span>
                </div>
              </div>
            </article>
          </div>
        </div>
      </header>

      <main class="workspace">
        <aside class="panel outline" aria-label="Scene outline">
          <div class="panel-header">
            <div class="panel-heading">
              <h2>Outline</h2>
              <p class="panel-description">Collect beats and jump to any scene instantly.</p>
            </div>
            <div class="panel-subtext" id="sceneCount">0 scenes</div>
          </div>
          <ol class="scene-list" id="sceneList"></ol>
          <div class="panel-section">
            <div class="panel-section-heading">
              <h3>Quick beats</h3>
              <span class="panel-hint">Scratchpad for ideas, beats and TODOs.</span>
            </div>
            <textarea id="beatNotes" placeholder="Jot down beats, reminders or TODOsâ€¦"></textarea>
          </div>
        </aside>

        <section class="panel editor" aria-label="Script editor">
          <div class="panel-header">
            <div class="panel-heading">
              <h2>Script draft</h2>
              <p class="panel-description">Use the shortcuts below to keep writing without breaking flow.</p>
            </div>
          </div>
          <div class="toolbar" role="toolbar" aria-label="Insert elements">
            <div class="toolbar-snippets">
              <button type="button" data-snippet="INT. " class="toolbar-btn">Scene</button>
              <button type="button" data-snippet="EXT. " class="toolbar-btn">Exterior</button>
              <button type="button" data-snippet="CHARACTER" class="toolbar-btn">Character</button>
              <button type="button" data-snippet="(CONT'D)" class="toolbar-btn">Parenthetical</button>
              <button type="button" data-snippet="CUT TO:" class="toolbar-btn">Transition</button>
            </div>
            <div class="toolbar-quick-actions">
              <button type="button" id="focusModeToggle" class="toolbar-chip">Focus mode</button>
              <button type="button" id="statsToggle" class="toolbar-chip">Show stats</button>
            </div>
          </div>

          <label for="scriptEditor" class="sr-only">Script editor</label>
          <textarea
            id="scriptEditor"
            spellcheck="false"
            autocomplete="off"
            autocapitalize="none"
            placeholder="Write your screenplay hereâ€¦"
          ></textarea>
          <div class="status-bar">
            <div class="status-left">
              <span class="status-tip-label">Flow tip</span>
              <p class="status-tip">
                Press <kbd>Tab</kbd> to align dialogue instantly or use the snippet keys to insert elements.
              </p>
            </div>
            <div class="status-right">
              <span class="hint-chip">âŒ˜ + S exports a Fountain copy</span>
              <span class="hint-chip">Use Outline to jump between beats</span>
            </div>
          </div>
        </section>

        <aside class="panel preview" aria-label="Preview and insights">
          <div class="panel-header">
            <div class="panel-heading">
              <h2>Formatted pages</h2>
              <p class="panel-description">
                Review how pages break while staying perfectly aligned with the editor.
              </p>
            </div>
            <div class="panel-subtext" id="pageIndicator">Page 1 of 1</div>
          </div>
          <div class="preview-scroll" id="previewScroller">
            <div id="scriptPreview" aria-live="polite"></div>
          </div>
          <section class="panel-section insights-section">
            <div class="panel-section-heading">
              <h3>Insights</h3>
              <span class="panel-hint">Track balance across characters, action and dialogue.</span>
            </div>
            <ul class="insights" id="insightsList"></ul>
          </section>
          <section class="panel-section share-section">
            <div class="panel-section-heading">
              <h3>Share link</h3>
              <span class="panel-hint">Generate a local link when you're ready for feedback.</span>
            </div>
            <div class="share-row">
              <input type="text" id="shareLink" readonly placeholder="Generate link via Share" />
              <button type="button" id="copyShareLinkBtn" class="ghost">Copy</button>
            </div>
          </section>
        </aside>
      </main>

      <footer class="app-footer glass-panel">
        <div class="footer-content">
          <div class="footer-shortcuts">
            <span class="footer-label">Keyboard shortcuts</span>
            <ul class="shortcut-list">
              <li><kbd>Enter</kbd> inserts the next logical element</li>
              <li><kbd>Shift</kbd> + <kbd>Enter</kbd> keeps the current style</li>
              <li><kbd>Tab</kbd> adds manual indentation</li>
            </ul>
          </div>
          <p class="footer-note">
            Scriptius is offline-first â€” export or share when you're ready to collaborate.
          </p>
        </div>
      </footer>
    </div>

    <div class="drawer" id="libraryDrawer" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="libraryTitle">
      <div class="drawer-panel glass-panel">
        <header class="drawer-header">
          <div>
            <h2 id="libraryTitle">My scripts</h2>
            <p class="drawer-subtext">Switch drafts, duplicate your favorites or start fresh.</p>
          </div>
          <button type="button" class="ghost icon" id="closeLibraryBtn" aria-label="Close library">âœ•</button>
        </header>
        <div class="drawer-controls">
          <label for="librarySearch" class="sr-only">Search scripts</label>
          <input type="search" id="librarySearch" placeholder="Search scriptsâ€¦" autocomplete="off" />
          <button type="button" id="createDocumentBtn" class="primary">New script</button>
        </div>
        <div class="drawer-body">
          <ul class="document-list" id="documentList" role="list"></ul>
          <p class="empty-library" id="emptyLibraryMessage" hidden>Your autosaved scripts will appear here.</p>
        </div>
        <footer class="drawer-footer">Scripts stay on this device unless you share or export them.</footer>
      </div>
    </div>

    <div class="modal" id="shareModal" role="dialog" aria-modal="true" aria-labelledby="shareTitle">
      <div class="modal-content glass-panel">
        <header class="modal-header">
          <h2 id="shareTitle">Share your script</h2>
          <button type="button" class="ghost icon" id="closeShareModal" aria-label="Close share dialog">âœ•</button>
        </header>
        <p>
          Scriptius generates a secure, local link that contains your script content. Send it to collaborators so they
          can open the same draft instantly.
        </p>
        <div class="share-actions">
          <input type="text" id="shareModalLink" readonly />
          <button type="button" id="shareModalCopy" class="primary">Copy link</button>
          <button type="button" id="nativeShareBtn" class="ghost">Native share</button>
        </div>
      </div>
    </div>

    <template id="sceneListItemTemplate">
      <li>
        <button type="button" class="scene-link">
          <span class="scene-number"></span>
          <span class="scene-title"></span>
          <span class="scene-meta"></span>
        </button>
      </li>
    </template>

    <template id="insightItemTemplate">
      <li class="insight-item">
        <span class="insight-label"></span>
        <span class="insight-value"></span>
      </li>
    </template>

    <div id="snackbar" role="status" aria-live="polite"></div>

    <script src="js/app.js" type="module"></script>
  </body>
</html>
